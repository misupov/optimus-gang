@page
@model IndexModel
@{
    ViewData["Title"] = "";
}

<style>
    .about {
        display: flex;
    }

    .shield {
    }

    .user-details {
        margin: 8px 0;
    }
</style>

<div class="block about">
    <div>
        <img class="shield" src="@Model.ClanDetails.BadgeUrls.Small">
    </div>
    <div>
        <div>Всего очков: @Model.ClanDetails.ClanPoints / @Model.ClanDetails.ClanVersusPoints</div>
        <div>Серия побед: @Model.ClanDetails.WarWinStreak</div>
        <div>Выиграно войн: @Model.ClanDetails.WarWins</div>
        <div>Проиграно войн: @Model.ClanDetails.WarLosses</div>
        <div>Ничья: @Model.ClanDetails.WarTies</div>
        <div>Побед &divide; поражений: @(((double)Model.ClanDetails.WarWins / Model.ClanDetails.WarLosses).ToString("##.000"))</div>
        <div>Публичный варлог: @(Model.ClanDetails.IsWarLogPublic ? "Да" : "Нет")</div>
        <div>Необходимо трофеев: @Model.ClanDetails.RequiredTrophies</div>
        <div>Расположение клана: @Model.ClanDetails.Location.Name</div>
        <div>Соклановцы: @Model.ClanDetails.Members/50</div>
    </div>
</div>

@{
    var totalDonation = (double)Model.ClanDetails.MemberList.Sum(m => m.Donations);
    var totalDonationReceived = (double)Model.ClanDetails.MemberList.Sum(m => m.DonationsReceived);
}

<div class="block"><div>@Model.ClanDetails.Description</div></div>

<div class="block">
    @foreach (var member in Model.ClanDetails.MemberList.OrderByDescending(m => m.Donations))
    {
    <div class="user-details">
        <div style="font-size: larger; color: yellow">@member.Name (@member.ExpLevel)</div>
        <div><span>Пожертвовал: </span>@member.Donations</div>
        <div><span>Получил: </span>@member.DonationsReceived</div>
        <div><span>Вклад: </span>@((member.Donations/totalDonation).ToString("P"))</div>
    </div>
    }
</div>
<div class="block">Привет!</div>
<div class="block">Yuriy!</div>
<div class="block">РоЗоВыЙ СлОнИк!</div>
